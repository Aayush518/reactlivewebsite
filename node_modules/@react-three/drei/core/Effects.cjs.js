"use strict";var e=require("@babel/runtime/helpers/extends"),r=require("react"),t=require("three"),a=require("@react-three/fiber"),s=require("three-stdlib"),n=require("react-merge-refs");function c(e){var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var a=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,a.get?a:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var i=c(r);const u=i.forwardRef((({children:r,multisamping:c=8,renderIndex:u=1,disableRender:l,disableGamma:o,disableRenderPass:d,depthBuffer:f=!0,stencilBuffer:h=!1,anisotropy:p=1,encoding:m,type:g,...b},y)=>{i.useMemo((()=>a.extend({EffectComposer:s.EffectComposer,RenderPass:s.RenderPass,ShaderPass:s.ShaderPass})),[]);const E=i.useRef(),{scene:v,camera:x,gl:P,size:R,viewport:w}=a.useThree(),[C]=i.useState((()=>{const e=new t.WebGLRenderTarget(R.width,R.height,{type:g||t.HalfFloatType,format:t.RGBAFormat,depthBuffer:f,stencilBuffer:h,anisotropy:p});return g===t.UnsignedByteType&&null!=m&&("colorSpace"in e?e.texture.colorSpace=m:e.texture.encoding=m),e.samples=c,e}));i.useEffect((()=>{var e,r;null==(e=E.current)||e.setSize(R.width,R.height),null==(r=E.current)||r.setPixelRatio(w.dpr)}),[P,R,w.dpr]),a.useFrame((()=>{var e;l||null==(e=E.current)||e.render()}),u);const S=[];return d||S.push(i.createElement("renderPass",{key:"renderpass",attach:`passes-${S.length}`,args:[v,x]})),o||S.push(i.createElement("shaderPass",{attach:`passes-${S.length}`,key:"gammapass",args:[s.GammaCorrectionShader]})),i.Children.forEach(r,(e=>{e&&S.push(i.cloneElement(e,{key:S.length,attach:`passes-${S.length}`}))})),i.createElement("effectComposer",e({ref:n([y,E]),args:[P,C]},b),S)}));exports.Effects=u,exports.isWebGL2Available=()=>{try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}};
