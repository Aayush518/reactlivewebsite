"use strict";var e=require("@babel/runtime/helpers/extends"),t=require("@react-three/fiber"),r=require("react"),n=require("three-stdlib");function a(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var s=a(r);const o=s.forwardRef(((r={enableDamping:!0},a)=>{const{domElement:o,camera:c,makeDefault:u,onChange:i,onStart:d,onEnd:l,...f}=r,m=t.useThree((e=>e.invalidate)),v=t.useThree((e=>e.camera)),b=t.useThree((e=>e.gl)),h=t.useThree((e=>e.events)),E=t.useThree((e=>e.set)),p=t.useThree((e=>e.get)),g=o||h.connected||b.domElement,j=c||v,L=s.useMemo((()=>new n.MapControls(j)),[j]);return s.useEffect((()=>{L.connect(g);const e=e=>{m(),i&&i(e)};return L.addEventListener("change",e),d&&L.addEventListener("start",d),l&&L.addEventListener("end",l),()=>{L.dispose(),L.removeEventListener("change",e),d&&L.removeEventListener("start",d),l&&L.removeEventListener("end",l)}}),[i,d,l,L,m,g]),s.useEffect((()=>{if(u){const e=p().controls;return E({controls:L}),()=>E({controls:e})}}),[u,L]),t.useFrame((()=>L.update()),-1),s.createElement("primitive",e({ref:a,object:L,enableDamping:!0},f))}));exports.MapControls=o;
