"use strict";var e=require("@babel/runtime/helpers/extends"),r=require("@react-three/fiber"),t=require("react"),n=require("three-stdlib");function s(e){var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var a=s(t);const c=t.forwardRef((({camera:s,makeDefault:c,regress:o,domElement:u,onChange:i,onStart:l,onEnd:d,...f},m)=>{const v=r.useThree((e=>e.invalidate)),b=r.useThree((e=>e.camera)),h=r.useThree((e=>e.gl)),E=r.useThree((e=>e.events)),g=r.useThree((e=>e.set)),p=r.useThree((e=>e.get)),T=r.useThree((e=>e.performance)),j=s||b,L=u||E.connected||h.domElement,O=t.useMemo((()=>new n.ArcballControls(j)),[j]);return r.useFrame((()=>{O.enabled&&O.update()}),-1),t.useEffect((()=>(O.connect(L),()=>{O.dispose()})),[L,o,O,v]),t.useEffect((()=>{const e=e=>{v(),o&&T.regress(),i&&i(e)};return O.addEventListener("change",e),l&&O.addEventListener("start",l),d&&O.addEventListener("end",d),()=>{O.removeEventListener("change",e),l&&O.removeEventListener("start",l),d&&O.removeEventListener("end",d)}}),[i,l,d]),t.useEffect((()=>{if(c){const e=p().controls;return g({controls:O}),()=>g({controls:e})}}),[c,O]),a.createElement("primitive",e({ref:m,object:O},f))}));exports.ArcballControls=c;
