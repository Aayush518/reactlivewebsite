"use strict";var e=require("@babel/runtime/helpers/extends"),r=require("@react-three/fiber"),t=require("react"),n=require("three-stdlib");function s(e){var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var o=s(t);const c=o.forwardRef((({domElement:t,...s},c)=>{const{onChange:u,makeDefault:a,...i}=s,l=r.useThree((e=>e.invalidate)),f=r.useThree((e=>e.camera)),d=r.useThree((e=>e.gl)),m=r.useThree((e=>e.events)),v=r.useThree((e=>e.get)),h=r.useThree((e=>e.set)),b=t||m.connected||d.domElement,E=o.useMemo((()=>new n.FlyControls(f)),[f]);return o.useEffect((()=>(E.connect(b),()=>{E.dispose()})),[b,E,l]),o.useEffect((()=>{const e=e=>{l(),u&&u(e)};return null==E.addEventListener||E.addEventListener("change",e),()=>null==E.removeEventListener?void 0:E.removeEventListener("change",e)}),[u,l]),o.useEffect((()=>{if(a){const e=v().controls;return h({controls:E}),()=>h({controls:e})}}),[a,E]),r.useFrame(((e,r)=>E.update(r))),o.createElement("primitive",e({ref:c,object:E,args:[f,b]},i))}));exports.FlyControls=c;
