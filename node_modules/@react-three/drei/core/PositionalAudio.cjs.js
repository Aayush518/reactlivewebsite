"use strict";var e=require("@babel/runtime/helpers/extends"),r=require("react"),t=require("three"),n=require("@react-three/fiber"),u=require("react-merge-refs");function o(e){var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var c=o(r);const s=c.forwardRef((({url:r,distance:o=1,loop:s=!0,autoplay:a,...i},f)=>{const d=c.useRef(),l=n.useThree((({camera:e})=>e)),[p]=c.useState((()=>new t.AudioListener)),b=n.useLoader(t.AudioLoader,r);return c.useEffect((()=>{const e=d.current;e&&(e.setBuffer(b),e.setRefDistance(o),e.setLoop(s),a&&!e.isPlaying&&e.play())}),[b,l,o,s]),c.useEffect((()=>{const e=d.current;return l.add(p),()=>{l.remove(p),e&&(e.isPlaying&&e.stop(),e.source&&e.source._connected&&e.disconnect())}}),[]),c.createElement("positionalAudio",e({ref:u([d,f]),args:[p]},i))}));exports.PositionalAudio=s;
