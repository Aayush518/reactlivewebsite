"use strict";var e=require("@babel/runtime/helpers/extends"),t=require("@react-three/fiber"),r=require("react"),n=require("three-stdlib");function s(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var a=s(r);const c=a.forwardRef((({makeDefault:r,camera:s,domElement:c,regress:o,onChange:i,onStart:u,onEnd:l,...f},d)=>{const{invalidate:m,camera:v,gl:E,events:b,set:g,get:p,performance:h,viewport:j}=t.useThree(),L=s||v,O=c||b.connected||E.domElement,k=a.useMemo((()=>new n.TrackballControls(L)),[L]);return t.useFrame((()=>{k.enabled&&k.update()}),-1),a.useEffect((()=>(k.connect(O),()=>{k.dispose()})),[O,o,k,m]),a.useEffect((()=>{const e=e=>{m(),o&&h.regress(),i&&i(e)};return k.addEventListener("change",e),u&&k.addEventListener("start",u),l&&k.addEventListener("end",l),()=>{u&&k.removeEventListener("start",u),l&&k.removeEventListener("end",l),k.removeEventListener("change",e)}}),[i,u,l,k,m]),a.useEffect((()=>{k.handleResize()}),[j]),a.useEffect((()=>{if(r){const e=p().controls;return g({controls:k}),()=>g({controls:e})}}),[r,k]),a.createElement("primitive",e({ref:d,object:k},f))}));exports.TrackballControls=c;
