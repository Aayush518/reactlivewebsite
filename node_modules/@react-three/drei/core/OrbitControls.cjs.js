"use strict";var e=require("@babel/runtime/helpers/extends"),r=require("@react-three/fiber"),t=require("react"),n=require("three-stdlib");function s(e){var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var a=s(t);const o=a.forwardRef((({makeDefault:t,camera:s,regress:o,domElement:c,enableDamping:u=!0,keyEvents:i=!1,onChange:d,onStart:f,onEnd:l,...m},v)=>{const b=r.useThree((e=>e.invalidate)),E=r.useThree((e=>e.camera)),h=r.useThree((e=>e.gl)),g=r.useThree((e=>e.events)),p=r.useThree((e=>e.setEvents)),O=r.useThree((e=>e.set)),T=r.useThree((e=>e.get)),j=r.useThree((e=>e.performance)),L=s||E,q=c||g.connected||h.domElement,y=a.useMemo((()=>new n.OrbitControls(L)),[L]);return r.useFrame((()=>{y.enabled&&y.update()}),-1),a.useEffect((()=>(i&&y.connect(!0===i?q:i),y.connect(q),()=>{y.dispose()})),[i,q,o,y,b]),a.useEffect((()=>{const e=e=>{b(),o&&j.regress(),d&&d(e)},r=e=>{f&&f(e)},t=e=>{l&&l(e)};return y.addEventListener("change",e),y.addEventListener("start",r),y.addEventListener("end",t),()=>{y.removeEventListener("start",r),y.removeEventListener("end",t),y.removeEventListener("change",e)}}),[d,f,l,y,b,p]),a.useEffect((()=>{if(t){const e=T().controls;return O({controls:y}),()=>O({controls:e})}}),[t,y]),a.createElement("primitive",e({ref:v,object:y,enableDamping:u},m))}));exports.OrbitControls=o;
