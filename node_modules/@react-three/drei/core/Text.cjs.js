"use strict";var e=require("@babel/runtime/helpers/extends"),t=require("react"),r=require("troika-three-text"),n=require("@react-three/fiber"),c=require("suspend-react");function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var a=o(t);const i=a.forwardRef((({sdfGlyphSize:t=64,anchorX:o="center",anchorY:i="middle",font:s,fontSize:u=1,children:f,characters:h,onSync:d,...l},p)=>{const b=n.useThree((({invalidate:e})=>e)),[y]=a.useState((()=>new r.Text)),[m,x]=a.useMemo((()=>{const e=[];let t="";return a.Children.forEach(f,(r=>{"string"==typeof r||"number"==typeof r?t+=r:e.push(r)})),[e,t]}),[f]);return c.suspend((()=>new Promise((e=>r.preloadFont({font:s,characters:h},e)))),["troika-text",s,h]),a.useLayoutEffect((()=>{y.sync((()=>{b(),d&&d(y)}))})),a.useEffect((()=>()=>y.dispose()),[y]),a.createElement("primitive",e({object:y,ref:p,font:s,text:x,anchorX:o,anchorY:i,fontSize:u,sdfGlyphSize:t},l),m)}));exports.Text=i;
